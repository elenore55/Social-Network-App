-- !Ups

CREATE TABLE USERS (
    USER_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    NAME VARCHAR(255) NOT NULL,
    SURNAME VARCHAR(255) NOT NULL,
    USERNAME VARCHAR(255) UNIQUE NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255) NOT NULL,
    DATE_OF_BIRTH DATE,
    PROFILE_PICTURE VARCHAR(255),
    PRIMARY KEY (USER_ID)
);

CREATE TABLE POSTS (
    POST_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    CONTENT VARCHAR(2000),
    CREATED DATETIME,
    LAST_UPDATED DATETIME,
    USER_ID BIGINT(20) NOT NULL,
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
    PRIMARY KEY (POST_ID)
);

CREATE TABLE REACTIONS (
    REACTION_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    POINTS INT,
    POST_ID BIGINT(20) NOT NULL,
    USER_ID BIGINT(20) NOT NULL,
    FOREIGN KEY (POST_ID) REFERENCES POSTS(POST_ID),
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
    PRIMARY KEY (REACTION_ID)
);

CREATE TABLE FRIENDSHIPS (
    FRIENDSHIP_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    USER1_ID BIGINT(20) NOT NULL,
    USER2_ID BIGINT(20) NOT NULL,
    FOREIGN KEY (USER1_ID) REFERENCES USERS(USER_ID),
    FOREIGN KEY (USER2_ID) REFERENCES USERS(USER_ID),
    PRIMARY KEY (FRIENDSHIP_ID)
);

CREATE TABLE FRIEND_REQS (
    REQ_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    DATE_TIME DATETIME,
    STATUS VARCHAR(20),
    SENDER_ID BIGINT(20) NOT NULL,
    RECEIVER_ID BIGINT(20) NOT NULL,
    FOREIGN KEY (SENDER_ID) REFERENCES USERS(USER_ID),
    FOREIGN KEY (RECEIVER_ID) REFERENCES USERS(USER_ID),
    PRIMARY KEY (REQ_ID)
);

CREATE TABLE COMMENTS (
    COMMENT_ID BIGINT(20) NOT NULL AUTO_INCREMENT,
    CONTENT VARCHAR(2000) NOT NULL,
    POST_ID BIGINT(20) NOT NULL,
    USER_ID BIGINT(20) NOT NULL,
    CREATED DATETIME,
    LAST_UPDATED DATETIME,
    FOREIGN KEY (POST_ID) REFERENCES POSTS(POST_ID),
    FOREIGN KEY (USER_ID) REFERENCES USERS(USER_ID),
    PRIMARY KEY (COMMENT_ID)
);

-- !Downs

DROP TABLE FRIEND_REQS;
DROP TABLE FRIENDSHIPS;
DROP TABLE REACTIONS;
DROP TABLE COMMENTS;
DROP TABLE POSTS;
DROP TABLE USERS;